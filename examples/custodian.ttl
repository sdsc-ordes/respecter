@prefix ex:   <http://example.org/#> .
@prefix sdc:  <https://swissdatacustodian.ch/doc/ontology#> .
@prefix dpv:  <https://w3id.org/dpv#> .
@prefix dcat: <http://www.w3.org/ns/dcat#> .
@prefix :     <http://www.myprefix.org/id/> .
@prefix rdf:  <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix sh:   <http://www.w3.org/ns/shacl#> .
@prefix xsd:  <http://www.w3.org/2001/XMLSchema#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix sdc:  <https://swissdatacustodian.ch/doc/ontology#> .
@prefix shsh: <http://www.w3.org/ns/shacl-shacl#> .
@prefix skos: <http://www.w3.org/2004/02/skos/core#> .
@prefix owl:  <http://www.w3.org/2002/07/owl#> .
@prefix vann: <http://purl.org/vocab/vann/> .
@prefix dct:  <http://purl.org/dc/terms/> .


<https://swissdatacustodian.ch/doc/ontology#> a owl:Ontology ;
    dct:abstract "The swiss data custodian ontology provides SHACL shapes and concepts (classes and properties) to model human and machine readable contracts." ;
    dct:contributor "Robin Franken", "Martin Fontanet", "Sabine Maennel", "Laure Vancauwenberghe", "Sabrina Ossey", "Cyril Matthey-Doret", "Stefan Milosavljevic" , "Luana Martelli", "Carlos Vivar Rios" ;
    dct:created "2023-10-16"^^xsd:date ;
    dct:creator "Robin Franken", "Martin Fontanet", "Sabrina Ossey" ;
    dct:description "The swiss data custodian ontology provides SHACL shapes and concepts (classes and properties) to model human and machine readable contracts." ;
    dct:license <https://spdx.org/licenses/CC-BY-SA-4.0.html> ;
    dct:modified "2024-01-17"^^xsd:date ;
    dct:title "Swiss Data Custodian Contract Ontology" ;
    vann:preferredNamespacePrefix "sdc" ;
    vann:preferredNamespaceUri "https://w3id.org/sdc#"^^xsd:string ;
    owl:versionInfo "1"^^xsd:string 
.

#Below is the shape for a container contract, it outlines which properties we expect for a container contract
#and how those properties should be filled in.


sdc:ContractShape
    rdf:type sh:NodeShape ;
    skos:prefLabel "Contract" ;
    sh:targetClass dpv:Contract ;
    sh:property sdc:hasIdentifierShape,
                sdc:startDateShape,
                sdc:endDateShape,
                sdc:hasDataHandlingShape.

sdc:DataHandlingShape
    rdf:type sh:NodeShape ;
    sh:targetClass sdc:DataHandling ;
    skos:prefLabel "Data Handling" ;
    sh:property sdc:hasDataControllerShape,
                sdc:hasDataSubjectShape,
                sdc:hasDataProcessorShape,
                sdc:hasPersonalDataShape,
                sdc:hasPurposeShape,
                sdc:hasProcessingShape,
                sdc:hasTechnicalOrganisationalMeasureShape.



sdc:PersonalDataShape rdf:type sh:NodeShape ;
    sh:targetClass dpv:PersonalData ;
    sh:property sdc:downloadURLShape,
                sdc:themeShape ;
                .    

sdc:LegalEntityShape rdf:type sh:NodeShape ;
    sh:targetClass dpv:LegalEntity ;
    sh:property sdc:hasNameShape ,
                sdc:hasIdentifierShape ;
.

sdc:SignatureShape a sh:NodeShape ;
    sh:targetClass sdc:Signature ;
    sh:property sdc:hasSigneeShape,
                sdc:hasContractShape,
                sdc:statusShape,
                sdc:contractHashShape,
                sdc:identifier,
                sdc:hasSignatureShape.

###################################################################################################################

dpv:Contract a rdfs:Class ;
    skos:definition "Creation, completion, fulfilment, or performance of a contract involving specified processing" ;
    skos:prefLabel "Contract" ;
    .

sdc:DataHandling a rdfs:Class ;
    skos:definition "A high-level Class to describe 'data handling'. This can consist of personal data being processed for a purpose, involving entities, using technical and organisational measures, applicable risks, rights, and legal basis." ;
    skos:prefLabel "Data Handling"
    .

dpv:LegalEntity a rdfs:Class ;
    rdfs:subClassOf dpv:Entity ;
    skos:prefLabel "Legal Entity" ;
    skos:definition "A human or non-human 'thing' that constitutes as an entity and which is recognised and defined in law" ;
    .

dpv:NaturalPerson a rdfs:Class;
    rdfs:subClassOf dpv:Entity ;
    skos:prefLabel "Natural Person" ;
    skos:definition "A human" ;
    .

dpv:OrganisationalUnit a rdfs:Class ;
    rdfs:subClassOf dpv:Entity ;
    skos:prefLabel "Organisational Unit" ;
    skos:definition "Entity within an organisation that does not constitute as a separate legal entity" ; 
    . 

dpv:PersonalData a rdfs:Class ;
    skos:prefLabel "Personal Data" ;
    skos:definition "Data directly or indirectly associated or related to an individual." ;
    .

############################################################################################################
dpv:hasIdentifier a rdf:Property ;
    skos:prefLabel "has identifier" ;
    skos:definition "Indicates an identifier associated for identification or reference" ;
    .

dcat:startDate a rdf:Property ;
    skos:prefLabel "Start date" ;
    skos:definition "The start of the period."
    .

dcat:endDate a rdf:Property ;
    skos:prefLabel "End date" ;
    skos:definition "The end of the period."
    .

dpv:hasDataController a rdf:Property ;    
    skos:prefLabel "has data controller" ;
    skos:definition "Indicates association with Data Controller" ;
    .

dpv:hasDataSubject a rdf:Property ;    
    skos:prefLabel "has data subject" ; 
    skos:definition "Indicates association with Data Subject" ;
    .

dpv:hasDataProcessor a rdf:Property ;    
    skos:prefLabel "has data processor" ; 
    skos:definition "Indiciates inclusion or applicability of a Data Processor" ;
    .

dpv:hasPurpose a rdf:Property ;
    skos:prefLabel "has purpose" ;
    skos:definition "Indicates association with Purpose" ;
    .

dpv:hasPersonalData a rdf:Property ;
    skos:prefLabel "has personal data" ;
    skos:definition "Indicates association with Personal Data" ;
    .

dpv:hasProcessing a rdf:Property ;
    skos:prefLabel "Has processing" ;
    skos:definition "Indicates association with Processing" ;
    .

dpv:hasTechnicalOrganisationalMeasure a rdf:Property ;
    skos:prefLabel "has technical and organisational measure" ;
    skos:definition "Indicates use or applicability of Technical or Organisational measure" ;
    .

sdc:hasDataHandling a rdf:Property ;
    skos:prefLabel "Has Data Handling" ;
    skos:definition "The property which links a contract to a data handling" ;
    .

dpv:hasName a rdf:Property ;
    skos:prefLabel "has name" ;
    skos:definition "Indicates a name" ;
    .

dcat:downloadURL a rdf:Property ;
    skos:prefLabel "Download URL" ;
    skos:definition "The URL of the downloadable file in a given format. E.g., CSV file or RDF file. The format is indicated by the distribution's dcterms:format and/or dcat:mediaType" ;
    .

dcat:theme a rdf:Property ;
    skos:prefLabel "Theme" ;
    skos:definition "A main category of the resource. A resource can have multiple themes." ;
    .

sdc:hasSignee a rdf:Property ;
    skos:prefLabel "has Signee" ;
    skos:definition "Relates a resource to a signee." ;
    .
sdc:hasContract a rdf:Property ;
    skos:prefLabel "has Contract" ;
    skos:definition "" ;
    .

sdc:status a rdf:Property ;
    skos:prefLabel "status" ;
    skos:definition "" ;
    .

sdc:contractHash a rdf:Property ;
    skos:prefLabel "contract Hash" ;
    skos:definition "" ;
    .

sdc:identifier a rdf:Property ;
    skos:prefLabel "identifier" ;
    skos:definition "" ;
    .

sdc:hasSignature a rdf:Property ;
    skos:prefLabel "has Signature" ;
    skos:definition "" ;
    .

###################################################################################################################
sdc:hasIdentifierShape a sh:PropertyShape ;
    sh:path dpv:hasIdentifier ;
    skos:prefLabel "Has identifier" ;
    sh:datatype xsd:string ;
    .

sdc:startDateShape a sh:PropertyShape ;
    sh:path dcat:startDate ;
    skos:prefLabel "Has start date" ;
    sh:datatype xsd:dateTime ;
    sh:lessThanOrEquals dcat:endDate ;
    sh:minCount 1 ;
    sh:maxCount 1 ;
    .

sdc:endDateShape a sh:PropertyShape ;
    sh:path dcat:endDate ;
    skos:prefLabel "Has end date" ;
    sh:datatype xsd:dateTime ;
    sh:minCount 1 ; 
    sh:maxCount 1 ;
    .

sdc:hasDataHandlingShape a sh:PropertyShape ;
    sh:path sdc:hasDataHandling ;
    sh:class sdc:DataHandling ;
    sh:minCount 1 ;
    .

sdc:hasDataControllerShape a sh:PropertyShape ;
    sh:path dpv:hasDataController ;
    skos:prefLabel "Has Data Controller" ;
    sh:minCount 1 ;
    sh:class dpv:DataController;
    .

sdc:hasDataSubjectShape a sh:PropertyShape ;
    sh:path dpv:hasDataSubject ;
    skos:prefLabel "Has Data Subject" ;
    sh:class dpv:DataSubject
    .

sdc:hasDataProcessorShape a sh:PropertyShape ;
    sh:path dpv:hasDataProcessor ;
    skos:prefLabel "Has Data Processor" ;
    sh:minCount 1 ;
    sh:class dpv:DataProcessor ;
    .

sdc:hasPurposeShape a sh:PropertyShape ;        
    sh:path dpv:hasPurpose ;
    skos:prefLabel "Has purpose" ;
    sh:class dpv:Purpose ; 
    sh:minCount 1 ;
    sh:maxCount 1 ;
    .

sdc:hasPersonalDataShape a sh:PropertyShape ;        
    sh:path dpv:hasPersonalData ;
    skos:prefLabel "Has data" ;
    sh:class dpv:PersonalData ;
    sh:minCount 1 ;
    .

sdc:hasProcessingShape a sh:PropertyShape ;        
    sh:path dpv:hasProcessing ;
    skos:prefLabel "Has processing" ;
    sh:class dpv:Processing ;
    sh:minCount 1 ;
    .

sdc:hasTechnicalOrganisationalMeasureShape a sh:PropertyShape ;        
    sh:path dpv:hasTechnicalOrganisationalMeasure ;
    skos:prefLabel "Has measure" ;
    sh:minCount 1 ;
    sh:or ([sh:class dpv:TechnicalMeasure][sh:class dpv:OrganisationalMeasure])
    .


sdc:hasNameShape a sh:PropertyShape ;
    sh:path dpv:hasName ;
    sh:datatype xsd:string ;
    .

sdc:downloadURLShape a sh:PropertyShape ;
    sh:path dcat:downloadURL ;
    sh:minCount 1 ;
    skos:prefLabel "Download URL" ;
    sh:datatype xsd:string ;
    .

sdc:themeShape a sh:PropertyShape ;
    sh:path dcat:theme ;
    sh:minCount 1 ;
    skos:prefLabel "Theme" ;
    sh:class sdc:Theme ;
    .

sdc:hasSigneeShape a sh:PropertyShape ;
    sh:path sdc:hasSignee ;
    sh:minCount 1 ;
    skos:prefLabel "has Signee" ;
    sh:class dpv:Entity ;
    .
sdc:hasContractShape a sh:PropertyShape ;
    sh:path sdc:hasContract ;
    sh:minCount 1 ;
    skos:prefLabel "has Contract" ;
    sh:class dpv:Contract ;
    .
sdc:statusShape a sh:PropertyShape ;
    sh:path sdc:status ;
    sh:minCount 1 ;
    skos:prefLabel "status" ;
    sh:datatype xsd:string ;
    .
sdc:contractHashShape a sh:PropertyShape ;
    sh:path sdc:contractHash ;
    sh:minCount 1 ;
    skos:prefLabel "contract Hash" ;
    sh:datatype xsd:string ;
    .
sdc:identifier a sh:PropertyShape ;
    sh:path sdc:identifier ;
    sh:minCount 1 ;
    skos:prefLabel "identifier" ;
    sh:datatype xsd:string ;
    .
sdc:hasSignatureShape a sh:PropertyShape ;
    sh:path sdc:hasSignature ;
    skos:prefLabel "has Signature" ;
    sh:class sdc:Signature ;
    .

